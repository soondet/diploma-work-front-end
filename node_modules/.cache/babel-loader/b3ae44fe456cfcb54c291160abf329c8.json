{"ast":null,"code":"import _slicedToArray from\"D:\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043A\\u0430\\\\code\\\\diploma-work-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"D:\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043A\\u0430\\\\code\\\\diploma-work-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043A\\u0430\\\\code\\\\diploma-work-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{loadStripe}from\"@stripe/stripe-js\";import{Elements,CardElement,useStripe,useElements}from\"@stripe/react-stripe-js\";import axios from\"axios\";var CheckoutForm=function CheckoutForm(){var stripe=useStripe();var elements=useElements();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _yield$stripe$createP,error,paymentMethod,id,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return stripe.createPaymentMethod({type:\"card\",card:elements.getElement(CardElement)});case 3:_yield$stripe$createP=_context.sent;error=_yield$stripe$createP.error;paymentMethod=_yield$stripe$createP.paymentMethod;if(error){_context.next=19;break;}id=paymentMethod.id;_context.prev=8;_context.next=11;return axios.post(\"/api/charge\",{id:id,amount:1099});case 11:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log(data);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](8);console.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[8,16]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,style:{maxWidth:\"400px\",margin:\"0 auto\"}},/*#__PURE__*/React.createElement(\"h4\",null,\"Price: 10$\"),/*#__PURE__*/React.createElement(CardElement,null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",disabled:!stripe},\"Pay\"));};var stripePromise=loadStripe(\"pk_test_51IYmp7KQZz31etWblogkjt7sWGcrG4viod9d40eJ4OrRyE18ZBC0HjKnfyYRt6QoRV0nv4EJYOWP7zC8r32ncYBj00fyRhj1WM\");var Index=function Index(){var _React$useState=React.useState(\"ready\"),_React$useState2=_slicedToArray(_React$useState,2),status=_React$useState2[0],setStatus=_React$useState2[1];if(status===\"success\"){return/*#__PURE__*/React.createElement(\"div\",null,\"Congrats on your\");}return/*#__PURE__*/React.createElement(Elements,{stripe:stripePromise},/*#__PURE__*/React.createElement(CheckoutForm,{success:function success(){setStatus(\"success\");}}));};export default Index;","map":{"version":3,"sources":["D:/Дипломка/code/diploma-work-front-end/src/components/index.js"],"names":["React","loadStripe","Elements","CardElement","useStripe","useElements","axios","CheckoutForm","stripe","elements","handleSubmit","event","preventDefault","createPaymentMethod","type","card","getElement","error","paymentMethod","id","post","amount","data","console","log","maxWidth","margin","stripePromise","Index","useState","status","setStatus"],"mappings":"umBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,OACEC,QADF,CAEEC,WAFF,CAGEC,SAHF,CAIEC,WAJF,KAKO,yBALP,CAMA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAMC,CAAAA,MAAM,CAAGJ,SAAS,EAAxB,CACA,GAAMK,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CAEA,GAAMK,CAAAA,YAAY,0FAAG,iBAAOC,KAAP,0LACnBA,KAAK,CAACC,cAAN,GADmB,sBAGoBJ,CAAAA,MAAM,CAACK,mBAAP,CAA2B,CAChEC,IAAI,CAAE,MAD0D,CAEhEC,IAAI,CAAEN,QAAQ,CAACO,UAAT,CAAoBb,WAApB,CAF0D,CAA3B,CAHpB,4CAGXc,KAHW,uBAGXA,KAHW,CAGJC,aAHI,uBAGJA,aAHI,IAQdD,KARc,0BASTE,EATS,CASFD,aATE,CASTC,EATS,wCAYQb,CAAAA,KAAK,CAACc,IAAN,CAAW,aAAX,CAA0B,CAAED,EAAE,CAAFA,EAAF,CAAME,MAAM,CAAE,IAAd,CAA1B,CAZR,yCAYPC,IAZO,mBAYPA,IAZO,CAafC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAbe,iFAefC,OAAO,CAACC,GAAR,cAfe,qEAAH,kBAAZd,CAAAA,YAAY,4CAAlB,CAoBA,mBACE,4BACE,QAAQ,CAAEA,YADZ,CAEE,KAAK,CAAE,CAAEe,QAAQ,CAAE,OAAZ,CAAqBC,MAAM,CAAE,QAA7B,CAFT,eAIE,2CAJF,cAME,oBAAC,WAAD,MANF,cAOE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,QAAQ,CAAE,CAAClB,MAAjC,QAPF,CADF,CAaD,CArCD,CAuCA,GAAMmB,CAAAA,aAAa,CAAG1B,UAAU,CAC9B,6GAD8B,CAAhC,CAIA,GAAM2B,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,qBACU5B,KAAK,CAAC6B,QAAN,CAAe,OAAf,CADV,oDACXC,MADW,qBACHC,SADG,qBAGlB,GAAID,MAAM,GAAK,SAAf,CAA0B,CACxB,mBAAO,kDAAP,CACD,CAED,mBACE,oBAAC,QAAD,EAAU,MAAM,CAAEH,aAAlB,eACE,oBAAC,YAAD,EACE,OAAO,CAAE,kBAAM,CACbI,SAAS,CAAC,SAAD,CAAT,CACD,CAHH,EADF,CADF,CASD,CAhBD,CAiBA,cAAeH,CAAAA,KAAf","sourcesContent":["import React from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport {\r\n  Elements,\r\n  CardElement,\r\n  useStripe,\r\n  useElements,\r\n} from \"@stripe/react-stripe-js\";\r\nimport axios from \"axios\";\r\nconst CheckoutForm = () => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const { error, paymentMethod } = await stripe.createPaymentMethod({\r\n      type: \"card\",\r\n      card: elements.getElement(CardElement),\r\n    });\r\n\r\n    if (!error) {\r\n      const { id } = paymentMethod;\r\n\r\n      try {\r\n        const { data } = await axios.post(\"/api/charge\", { id, amount: 1099 });\r\n        console.log(data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      style={{ maxWidth: \"400px\", margin: \"0 auto\" }}\r\n    >\r\n      <h4>Price: 10$</h4>\r\n\r\n      <CardElement />\r\n      <button type=\"submit\" disabled={!stripe}>\r\n        Pay\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst stripePromise = loadStripe(\r\n  \"pk_test_51IYmp7KQZz31etWblogkjt7sWGcrG4viod9d40eJ4OrRyE18ZBC0HjKnfyYRt6QoRV0nv4EJYOWP7zC8r32ncYBj00fyRhj1WM\"\r\n);\r\n\r\nconst Index = () => {\r\n  const [status, setStatus] = React.useState(\"ready\");\r\n\r\n  if (status === \"success\") {\r\n    return <div>Congrats on your</div>;\r\n  }\r\n\r\n  return (\r\n    <Elements stripe={stripePromise}>\r\n      <CheckoutForm\r\n        success={() => {\r\n          setStatus(\"success\");\r\n        }}\r\n      />\r\n    </Elements>\r\n  );\r\n};\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}