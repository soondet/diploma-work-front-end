{"ast":null,"code":"import _classCallCheck from\"D:\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043A\\u0430\\\\code\\\\diploma-work-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043A\\u0430\\\\code\\\\diploma-work-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043A\\u0430\\\\code\\\\diploma-work-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"D:\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043A\\u0430\\\\code\\\\diploma-work-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"D:\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043A\\u0430\\\\code\\\\diploma-work-front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Router,Switch,Route,Link}from\"react-router-dom\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"./App.css\";import Login from\"./components/login.component\";import Register from\"./components/register.component\";import Home from\"./components/home.component\";import Profile from\"./components/profile.component\";import BoardUser from\"./components/board-user.component\";import BoardModerator from\"./components/board-moderator.component\";import BoardAdmin from\"./components/board-admin.component\";import{logout}from\"./actions/auth\";import{clearMessage}from\"./actions/message\";import{history}from'./helpers/history';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.logOut=_this.logOut.bind(_assertThisInitialized(_this));_this.state={showModeratorBoard:false,showAdminBoard:false,currentUser:undefined};history.listen(function(location){props.dispatch(clearMessage());// clear message when changing location\n});return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var user=this.props.user;if(user){this.setState({currentUser:user,showModeratorBoard:user.roles.includes(\"ROLE_MODERATOR\"),showAdminBoard:user.roles.includes(\"ROLE_ADMIN\")});}}},{key:\"logOut\",value:function logOut(){this.props.dispatch(logout());}},{key:\"render\",value:function render(){var _this$state=this.state,currentUser=_this$state.currentUser,showModeratorBoard=_this$state.showModeratorBoard,showAdminBoard=_this$state.showAdminBoard;return/*#__PURE__*/React.createElement(Router,{history:history},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"nav\",{className:\"navbar navbar-expand navbar-dark bg-dark\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"navbar-brand\"},\"BusSystem\"),/*#__PURE__*/React.createElement(\"div\",{className:\"navbar-nav mr-auto\"},/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/home\",className:\"nav-link\"},\"Home\")),showModeratorBoard&&/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/mod\",className:\"nav-link\"},\"Moderator Board\")),showAdminBoard&&/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin\",className:\"nav-link\"},\"Admin Board\")),currentUser&&/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/user\",className:\"nav-link\"},\"User\"))),currentUser?/*#__PURE__*/React.createElement(\"div\",{className:\"navbar-nav ml-auto\"},/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/profile\",className:\"nav-link\"},currentUser.username)),/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/login\",className:\"nav-link\",onClick:this.logOut},\"Log Out\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"navbar-nav ml-auto\"},/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"nav-link\"},\"Login\")),/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/register\",className:\"nav-link\"},\"Sign Up\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-3\"},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:[\"/\",\"/home\"],component:Home}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/login\",component:Login}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/profile\",component:Profile}),/*#__PURE__*/React.createElement(Route,{path:\"/user\",component:BoardUser}),/*#__PURE__*/React.createElement(Route,{path:\"/mod\",component:BoardModerator}),/*#__PURE__*/React.createElement(Route,{path:\"/admin\",component:BoardAdmin})))));}}]);return App;}(Component);function mapStateToProps(state){var user=state.auth.user;return{user:user};}export default connect(mapStateToProps)(App);","map":{"version":3,"sources":["D:/Дипломка/code/diploma-work-front-end/src/App.js"],"names":["React","Component","connect","Router","Switch","Route","Link","Login","Register","Home","Profile","BoardUser","BoardModerator","BoardAdmin","logout","clearMessage","history","App","props","logOut","bind","state","showModeratorBoard","showAdminBoard","currentUser","undefined","listen","location","dispatch","user","setState","roles","includes","username","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Router, Switch, Route, Link } from \"react-router-dom\";\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./App.css\";\r\n\r\nimport Login from \"./components/login.component\";\r\nimport Register from \"./components/register.component\";\r\nimport Home from \"./components/home.component\";\r\nimport Profile from \"./components/profile.component\";\r\nimport BoardUser from \"./components/board-user.component\";\r\nimport BoardModerator from \"./components/board-moderator.component\";\r\nimport BoardAdmin from \"./components/board-admin.component\";\r\n\r\nimport { logout } from \"./actions/auth\";\r\nimport { clearMessage } from \"./actions/message\";\r\n\r\nimport { history } from './helpers/history';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.logOut = this.logOut.bind(this);\r\n\r\n    this.state = {\r\n      showModeratorBoard: false,\r\n      showAdminBoard: false,\r\n      currentUser: undefined,\r\n    };\r\n\r\n    history.listen((location) => {\r\n      props.dispatch(clearMessage()); // clear message when changing location\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const user = this.props.user;\r\n\r\n    if (user) {\r\n      this.setState({\r\n        currentUser: user,\r\n        showModeratorBoard: user.roles.includes(\"ROLE_MODERATOR\"),\r\n        showAdminBoard: user.roles.includes(\"ROLE_ADMIN\"),\r\n      });\r\n    }\r\n  }\r\n\r\n  logOut() {\r\n    this.props.dispatch(logout());\r\n  }\r\n\r\n  render() {\r\n    const { currentUser, showModeratorBoard, showAdminBoard } = this.state;\r\n\r\n    return (\r\n      <Router history={history}>\r\n        <div>\r\n          <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\r\n            <Link to={\"/\"} className=\"navbar-brand\">\r\n              BusSystem\r\n            </Link>\r\n            <div className=\"navbar-nav mr-auto\">\r\n              <li className=\"nav-item\">\r\n                <Link to={\"/home\"} className=\"nav-link\">\r\n                  Home\r\n                </Link>\r\n              </li>\r\n\r\n              {showModeratorBoard && (\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/mod\"} className=\"nav-link\">\r\n                    Moderator Board\r\n                  </Link>\r\n                </li>\r\n              )}\r\n\r\n              {showAdminBoard && (\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/admin\"} className=\"nav-link\">\r\n                    Admin Board\r\n                  </Link>\r\n                </li>\r\n              )}\r\n\r\n              {currentUser && (\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/user\"} className=\"nav-link\">\r\n                    User\r\n                  </Link>\r\n                </li>\r\n              )}\r\n            </div>\r\n\r\n            {currentUser ? (\r\n              <div className=\"navbar-nav ml-auto\">\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/profile\"} className=\"nav-link\">\r\n                    {currentUser.username}\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <a href=\"/login\" className=\"nav-link\" onClick={this.logOut}>\r\n                    Log Out\r\n                  </a>\r\n                </li>\r\n              </div>\r\n            ) : (\r\n              <div className=\"navbar-nav ml-auto\">\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/login\"} className=\"nav-link\">\r\n                    Login\r\n                  </Link>\r\n                </li>\r\n\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/register\"} className=\"nav-link\">\r\n                    Sign Up\r\n                  </Link>\r\n                </li>\r\n              </div>\r\n            )}\r\n          </nav>\r\n\r\n          <div className=\"container mt-3\">\r\n            <Switch>\r\n              <Route exact path={[\"/\", \"/home\"]} component={Home} />\r\n              <Route exact path=\"/login\" component={Login} />\r\n              <Route exact path=\"/register\" component={Register} />\r\n              <Route exact path=\"/profile\" component={Profile} />\r\n              <Route path=\"/user\" component={BoardUser} />\r\n              <Route path=\"/mod\" component={BoardModerator} />\r\n              <Route path=\"/admin\" component={BoardAdmin} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const { user } = state.auth;\r\n  return {\r\n    user,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(App);\r\n"]},"metadata":{},"sourceType":"module"}